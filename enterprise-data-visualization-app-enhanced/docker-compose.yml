```yaml
version: '3.8'

services:
  db:
    image: postgres:14-alpine
    restart: always
    environment:
      POSTGRES_DB: dashboard_db
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
    volumes:
      - pg_data:/var/lib/postgresql/data
    ports:
      - "5432:5432" # Expose for local development/debugging
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U user -d dashboard_db"]
      interval: 5s
      timeout: 5s
      retries: 5

  db_test: # Separate database for running tests
    image: postgres:14-alpine
    restart: always
    environment:
      POSTGRES_DB: test_dashboard_db
      POSTGRES_USER: test_user
      POSTGRES_PASSWORD: test_password
    volumes:
      - pg_test_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U test_user -d test_dashboard_db"]
      interval: 5s
      timeout: 5s
      retries: 5

  redis:
    image: redis:6-alpine
    restart: always
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 5s
      timeout: 3s
      retries: 5

  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    restart: always
    env_file:
      - .env.example # Use .env.example for default values, override with real .env in prod
    environment: # Overrides values in .env.example
      DATABASE_URL: postgresql://user:password@db:5432/dashboard_db
      TEST_DATABASE_URL: postgresql://test_user:test_password@db_test:5432/test_dashboard_db
      CACHE_REDIS_HOST: redis
      # Add other sensitive variables via proper environment variable management in production
      SECRET_KEY: ${SECRET_KEY} # Read from host's .env if present, or use default from .env.example
      JWT_SECRET_KEY: ${JWT_SECRET_KEY}
    ports:
      - "5000:5000" # Expose backend port for direct access during dev, or via Nginx in prod
    depends_on:
      db:
        condition: service_healthy
      redis:
        condition: service_healthy
    command: sh -c "python /app/backend/seed_data.py && alembic upgrade head && gunicorn -w 4 -b 0.0.0.0:5000 wsgi:app"
    volumes:
      - ./backend:/app/backend # Mount for live code changes during development (remove in prod for performance)

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
      args:
        REACT_APP_API_BASE_URL: http://localhost:5000/api # For local dev with Nginx proxy
    restart: always
    ports:
      - "3000:80" # Map host port 3000 to Nginx container port 80
    depends_on:
      backend:
        condition: service_started
    environment:
      # These are only used during `npm run start` if not using Nginx
      # When building, REACT_APP_API_BASE_URL is passed as ARG to Dockerfile
      REACT_APP_API_BASE_URL: http://localhost:5000/api # During dev with `npm start`
    volumes:
      - ./frontend:/app # Mount for live code changes during development

volumes:
  pg_data:
  pg_test_data:
  redis_data:

```